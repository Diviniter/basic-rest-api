function extend(t,e){for(var r in e)t[r]=e[r]}function download(t,e){var r=document.createElement("a");r.style.display="none",document.body.appendChild(r);var n=window.URL.createObjectURL(t);r.href=n,r.download=e,r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r)}var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),RestApi=function(t){function e(e){var r=t.call(this,e)||this;return r.baseUrl=e,r}return __extends(e,t),e}(ResourceNavigator),RequestInitGenerator=function(){function t(){}return t.prototype.getHeader=function(t){return void 0==t?new Headers:new Headers(t)},t.prototype.getJsonHeader=function(t){var e={"Content-Type":"application/json"};return void 0!=t&&extend(t,e),this.getHeader(e)},t.prototype.get=function(t){return{method:"GET",headers:this.getJsonHeader(t)}},t.prototype.put=function(t,e){return{method:"PUT",headers:this.getJsonHeader(e),body:JSON.stringify(t)}},t.prototype.post=function(t,e){return{method:"POST",headers:this.getJsonHeader(e),body:JSON.stringify(t)}},t.prototype.delete=function(t){return{method:"DELETE",headers:this.getHeader(t)}},t.prototype.postFile=function(t,e){var r=new FormData;return r.append("file",t),{method:"POST",headers:this.getHeader(e),body:r}},t.prototype.getFile=function(t){return{method:"GET",headers:this.getHeader(t)}},t}(),BaseResource=function(){function t(t,e){this.url=t+"/"+e,this.requestInit=new RequestInitGenerator}return t.prototype.id=function(t){return new ResourceNavigator(this.url+"/"+t)},t.prototype.getAll=function(t){return fetch(this.url,this.requestInit.get(t)).then(this.handleError)},t.prototype.get=function(t,e){return fetch(this.url+"/"+t.toString(),this.requestInit.get(e)).then(this.handleError)},t.prototype.save=function(t,e){return fetch(this.url+"/"+t.id.toString(),this.requestInit.put(t,e)).then(this.handleErrorWithoutReponse)},t.prototype.delete=function(t,e){return fetch(this.url+"/"+t.toString(),this.requestInit.delete(e)).then(this.handleErrorWithoutReponse)},t.prototype.handleError=function(t){if(!t.ok)throw Error(t.statusText);return t.json()},t.prototype.handleErrorWithoutReponse=function(t){if(!t.ok)throw Error(t.statusText);return Promise.resolve()},t}(),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),FileResource=function(t){function e(e,r){return t.call(this,e,r)||this}return __extends(e,t),e.prototype.upload=function(t,e,r){return void 0===e&&(e=function(){}),fetch(this.url+"/upload",this.requestInit.postFile(t,r)).then(function(t){return e(),t}).then(this.handleError)},e.prototype.download=function(t,e){return fetch(this.url+"/"+t.toString()+"/download",this.requestInit.getFile(e)).then(function(t){if(!t.ok)throw Error(t.statusText);return t.blob()})},e}(BaseResource),__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Resource=function(t){function e(e,r){return t.call(this,e,r)||this}return __extends(e,t),e.prototype.create=function(t,e){return fetch(this.url,this.requestInit.post(t,e)).then(this.handleError)},e}(BaseResource),ResourceNavigator=function(){function t(t){this.url=t}return t.prototype.resource=function(t){return new Resource(this.url,t)},t.prototype.fileResource=function(t){return new FileResource(this.url,t)},t}();